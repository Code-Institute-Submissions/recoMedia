{% extends 'base.html' %}
{% block content %}
<div class="bg-film">
    <img src="{{url_for('static',filename='images/movie-image.jpg')}}"" alt="projector image">
</div>
<h2>New to RecoMedia</h2>
<h3>Sign up <span>here</span> to get started</h3>
<div class="row">
    <form action="{{url_for('insert_user') }}" method="POST" class="col s12">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        <ul class=flashes>
            {% for category, message in messages %}
            <div class="{{category}}">{{ message }}</div>
            {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}
        <div class="row">
            <div class="input-field col s12">
                <input id="username" type="text" name="username" class="validate" /required>
                <label for="username" class="active">Username</label>
            </div>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input id="password" type="password" name="password" minlength="9" class="validate" oninput="checkPasswordsMatch(this)" /required>
                <label for="password" class="active" data-error="Please enter your first name.">Password</label>
            </div>
            <span>Please note your password must be more than 8 characters long.</span>
        </div>
        <div class="row">
            <div class="input-field col s12">
                <input id="c_password" type="password" name="c_password" class="validate" oninput="checkPasswordsMatch(this)" /required>
                <label for="c_password" class="active">Confirm Password</label>
            </div>
        </div>
        <div class="row" id="err-msg">
        </div>
        <button class="btn waves-effect waves-light" type="submit" name="action">Register Profile
            <i class="material-icons right"></i>
        </button>
    </form>
</div>
<p>{{usernames}}</p>
<script language='javascript' type='text/javascript'>
    function checkPasswordsMatch(input) {
        console.log('checker function accessed.')
        if ( $('#c_password').val() != $('#password').val() && $('#c_password').val().length>0 ) {
            console.log('passwords not equal accessed.\n'+$('#password').val()+' , '+input.value)
            $("div #err-msg").html("Password Must be Matching.");
            $("#err-msg").css("color","red");
        } else {
            // input is valid -- reset the error message
            console.log('passwords equal accessed.\n'+$('#password').val()+' , '+input.value)
            $("#err-msg").html("<p></p>");
        }
    }
    $(document).ready(function() {
        M.updateTextFields();
    });
</script>
{% endblock %}


